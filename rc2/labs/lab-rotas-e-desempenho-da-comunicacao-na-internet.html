<p><!DOCTYPE html>
<html>
<title>Redes de Computadores 2 - Prof. Ricardo da Rocha</title></p>

<p><xmp theme="simplex" style="display:none;"></p>

<h1>LaboratÃÂ³rio: Rotas e Desempenho da ComunicaÃÂ§ÃÂ£o na Internet</h1>

<h1>Objetivos</h1>

<ul>
<li>Compreender as caracterÃÂ­sticas das rotas seguidas pelos pacotes/mensagens na Internet</li>
<li>Experimentas os atrasos na comunicaÃÂ§ÃÂ£o via Internet</li>
</ul>

<h1>PrÃÂ©-requisitos</h1>

<ul>
<li><em>Conhecimento:</em> Compreender os aspectos gerais do roteamento na Internet e as componentes de atraso de mensagens.</li>
<li><strong>Atividades prÃÂ©-lab</strong>
<ul>
<li>Assistir ÃÂ s video-aulas de RC1:
<ul>
<li><a href="https://youtu.be/6sGCQ1_KnqM">Internet como Rede HierÃÂ¡rquica e HeterogÃÂªnea</a></li>
<li><a href="https://youtu.be/MSYJm0GWizM">Componentes e Natureza do Atraso de Pacotes</a></li>
</ul></li>
</ul></li>
</ul>

<h1>VisÃÂ£o Geral</h1>

<p>Nesta tarefa, vocÃÂª terÃÂ¡ que realizar experimentos para analisar o comportamento da comunicaÃÂ§ÃÂ£o na Internet, utilizando as ferramentas de comunicaÃÂ§ÃÂ£o <strong>traceroute</strong> e <strong>mtr</strong>.</p>

<!-- # Requisitos

Todos os requisitos abaixos devem ser atendidos para que vocÃÂª obtenha **SUCESSO** como conceito da sua tarefa:

1. A atividade ÃÂ© **individual** e nÃÂ£o pode haver nenhum tipo de cÃÂ³pia ou similaridade entre os programas ou resultados.
2. Todos os resultados dos experimentos devem ser entregues atÃÂ© a data e horÃÂ¡rios combinados com o professor. 
3. Todos os experimentos sÃÂ£o obrigatÃÂ³rios. 
4. O relatÃÂ³rio deverÃÂ¡ seguir o formato indicado na seÃÂ§ÃÂ£o **Formato do RelatÃÂ³rio**.

-->

<h1>Tarefas</h1>

<ol>
<li><p>Indique o endereÃÂ§o IP alvo que serÃÂ¡ utilizado por vocÃÂª nos experimentos. O endereÃÂ§o IP que vocÃÂª deverÃÂ¡ utilizar estÃÂ¡ indicado no arquivo <a href="dados/lab1.1-destinos.txt">lab1.1-destinos.txt</a> ao lado do seu nÃÂºmero de matricula ou nome.</p></li>
<li><p>No laboratÃÂ³rio (em sala de aula), meÃÂ§a os atrasos da sua estaÃÂ§ÃÂ£o atÃÂ© o destino, utilizando o utilitÃÂ¡rio <code>ping</code>. FaÃÂ§a 100 mediÃÂ§ÃÂµes (acompanhe no campo <code>icmp_seq</code>). Identifique o menor e o maior valor medido. Reporte o resultado do seu teste - saÃÂ­da do ping - e os menores e maiores valores obtidos. Anote tambÃÂ©m o comando que vocÃÂª executou neste passo (identificado por <code>&lt;2&gt;</code>).</p>

<pre><code>destino:
menor-atraso:
maior-atraso:
saida:
</code></pre></li>
<li><p>Execute o programa <code>traceroute</code> ou <code>mtr</code> para identificar a rota entre a sua estaÃÂ§ÃÂ£o e o destino no momento do experimento. Utilize inicialmente o comando sem nenhum parÃÂ¢metro adicional, para perceber o comportamento da rota e depois com os parÃÂ¢metros abaixo, para solicitar a realizaÃÂ§ÃÂ£o de 10 testes e reportar todo o resultado de uma vez. O resultado deverÃÂ¡ ser submetido como um dos resultados do experimento.</p>

<pre><code>mtr --show-ips --report-wide -c 10 8.8.8.8
</code></pre></li>
<li><p>Realize novamente o teste, utilizando o envio de pacotes por TCP na porta <code>80</code>, usando os parÃÂ¢metros <code>--tcp -P 80</code> para facilitar o roteamento por diferentes caminhos (nÃÂ£o use o parÃÂ¢metro <code>--report-wide</code>). Anote o nÃÂºmero do salto e IP, em cada situaÃÂ§ÃÂ£o que se encontrou uma rota diferente. A sua resposta deve ter o formato do exemplo abaixo, indicando que no salto <strong>5</strong> a rota passou pelos IPs indicados e no salto <strong>8</strong> pelos dois IPs indicados.</p>

<pre><code>5 3.3.3.3
5 3.3.3.4
5 3.3.3.5
8 7.7.7.7
8 7.7.7.8
</code></pre></li>
<li><p>Calcule o atraso mÃÂ©dio estimado <strong>entre</strong> cada um dos hops (saltos). Lembre-se que o atraso indicado na saÃÂ­da do programa ÃÂ© o RTT entre a origem (sua estaÃÂ§ÃÂ£o) e o respectivo salto. A sua resposta deve seguir o formato do seguinte exemplo (observe o uso de "." e nÃÂ£o "," e valores em "ms"):</p>

<pre><code>1-2 1 ms
2-3 5.22 ms
3-4 10 ms
4-5 10 ms
</code></pre></li>
<li><p>Para cada estaÃÂ§ÃÂ£o, identifique a sua localizaÃÂ§ÃÂ£o, utilizando o endereÃÂ§o IP e um serviÃÂ§o de mapeamento entre IP e localizaÃÂ§ÃÂ£o (sugestÃÂ£o: <a href="https://iplocation.com/">https://iplocation.com/</a> ou <a href="https://www.iplocation.net/">https://www.iplocation.net/</a>). Indique o provedor de acesso (ISP) responsÃÂ¡vel pelo IP. A sua resposta deve seguir o formato do seguinte exemplo (a localizaÃÂ§ÃÂ£o ÃÂ© livre, com nomes separados por vÃÂ­rgula):</p>

<pre><code>1 219.163.164.114 Japan, Tokyo, Open Kikaku Co. Ltd.
2 163.43.24.70 Japan, Tokyo, Sakura Internet Inc.
</code></pre></li>
<li><p>Repita os passos de <strong>2</strong> a <strong>6</strong> em casa em dois horÃÂ¡rios diferentes. Olhe nos <a href="https://ix.br/agregado/">grÃÂ¡ficos de trÃÂ¡fego da Internet brasileira</a> os dias e horÃÂ¡rios em que o trÃÂ¡fego da Internet ÃÂ© baixo e ÃÂ© alto e faÃÂ§a os experimentos prÃÂ³ximos destes. </p></li>
<li><p>Descrevas as diferenÃÂ§as de rotas e atrasos entre os dois experimentos e o experimento feito em sala de aula.</p></li>
</ol>

<p>Todos os comandos usados em cada etapa de <strong>2</strong> a <strong>6</strong> deverÃÂ£o ser  documentados em arquivo <code>Lab1.1-comandos.txt</code>, usando o seguinte formato:</p>

<pre><code>    2 ls -la
    3 clear
</code></pre>

<p>Para um caso hipotÃÂ©tico de que foi usado o comando <code>ls -la</code> no passo <strong>2</strong> e <code>clear</code> no passo <strong>3</strong>.</p>

<h1>RelatÃÂ³rio</h1>

<p>A entrega do relatÃÂ³rio deve ser pelo github classroom, com o qual vocÃÂªs terÃÂ£o uma ÃÂ¡rea indicada a partir de email enviado para vocÃÂªs. Esse relatÃÂ³rio deve ser entregue em atÃÂ© 5 dias.</p>

<p>Todos os arquivos colocados no githuv devem estar codificados em <code>UTF-8</code> e devem ser arquivos de texto, seguindo a seguinte estrutura</p>

<pre><code>    README.md       - deve conter uma linha com o seu nome
    Lab1.1.2.txt    - resposta do item (2), de acordo com o formato indicado
    Lab1.1.3.txt    - resposta do item (3)
    Lab1.1.4.txt
    Lab1.1.5.txt
    Lab1.1.6.txt
    Lab1.1.7.2a.txt - resposta da execuÃÂ§ÃÂ£o do item (2) para outro horÃÂ¡rio do dia
    Lab1.1.7.3a.txt 
    Lab1.1.7.4a.txt
    Lab1.1.7.5a.txt
    Lab1.1.7.6a.txt
    Lab1.1.7.2b.txt - resposta da execuÃÂ§ÃÂ£o do item (2) para outro horÃÂ¡rio do dia
    Lab1.1.7.3b.txt
    Lab1.1.7.4b.txt
    Lab1.1.7.5b.txt
    Lab1.1.7.6b.txt
    Lab1.1-comandos.txt - comandos usandos nos passos de (2) a (6).
    Lab1.1.8.txt    - resposta em texto livre para o item (8)
</code></pre>

<!--
* LaboratÃÂ³rio 1.1: Rotas e Desempenho da ComunicaÃÂ§ÃÂ£o na Internet




   + objetivo:
   + prÃÂ©-lab: 

     github: usar
     em quais situaÃÂ§ÃÂµes nÃÂ£o hÃÂ¡ resposta?

     roteamento com datagramas
     traceroute


se vocÃÂª nÃÂ£o lembra:
  - modelo de camadas: ver

       funcionamento do traceroute e ping, TTL, ICMP, mtr
       **necessÃÂ¡rio** 
           1. preparar mÃÂ¡quinas na rede para experimento. 
           2. preparar questÃÂµes
           3. video sobre github classroom e github
   + atividades: 
        1. enviar trace para ipinexistente, 2. rotas com *, 3. em casa em horÃÂ¡rios diferentes
   + relatÃÂ³rio: resultado do trace route com atrasos. 

mtr -rw 8.8.8.8
-n no dns
-l (raw)
-c para nÃÂºmero de mediÃÂ§ÃÂµes

- atrasos -> usar aplicaÃÂ§ÃÂµes usuais
- rotas diferentes -> 
- diferentes atrasos ao longo do dia
- roteamento de datagramas na Internet
- efeito de testar: ICMP, UDP, TCP?


- pegar rotas para japan e russia
google:"ip russia", "ip japan" (mostra proxies)
atrasos em enlaces transoceanicos
- provedores de acesso responsÃÂ¡veis pelos IPs

https://www.caida.org/tools/taxonomy/perftaxonomy.xml
https://www.linode.com/docs/networking/diagnostics/diagnosing-network-issues-with-mtr/

artigos sobre mediÃÂ§ÃÂ£o
https://www.rnp.br/destaques/confira-dez-artigos-academicos-entender-monitoramento-redes

atraso de propagaÃÂ§ÃÂ£o, de transmissÃÂ£o, processamento, 
baixe um conteÃÂºdo X de tamanho K 

avaliar as diferenÃÂ§as dos atrasos em diversas mediÃÂ§ÃÂµes

velocidade??
bwping ??

sudo apt install geoip-bin

# tarefas

1. Indique o endereÃÂ§o IP alvo que serÃÂ¡ utilizado por vocÃÂª nos experimentos. O endereÃÂ§o IP que vocÃÂª deverÃÂ¡ utilizar estÃÂ¡ indicado no arquivo lab1.1-destinos.txt ao lado do seu nÃÂºmero de matricula.

2. No laboratÃÂ³rio (em sala de aula), meÃÂ§a os atrasos da sua estaÃÂ§ÃÂ£o atÃÂ© o destino, utilizando o utilitÃÂ¡rio ping. FaÃÂ§a 100 mediÃÂ§ÃÂµes (acompanhe no campo icmp_seq). Identifique o menor e o maior valor medido. Reporte o resultado do seu teste - saÃÂ­da do ping - e os menos e maiores valores objetidos.

   saÃÂ­da programa
   menor
   maior valor

3. Execute o programa traceroute ou mtr para identificar a rota entre a sua estaÃÂ§ÃÂ£o e o destino no momento do experimento.

mtr --show-ips --report-wide -c 10 8.8.8.8

teste com rotas diferentes. mostre.
usar mtr -n --tcp -P 80 118.151.186.55

4. Calcule o atraso mÃÂ©dio estimado entre cada um dos hops (saltos). Lembre-se que o atraso indicado ÃÂ© o RTT entre a origem (sua estaÃÂ§ÃÂ£o) e o respectivo salto.

5. Para cada estaÃÂ§ÃÂ£o, identifique a sua localizaÃÂ§ÃÂ£o, utilizando o endereÃÂ§o IP e um serviÃÂ§o de mapeamento entre IP e localizaÃÂ§ÃÂ£o (exemplo: <https://iplocation.com/> ou <https://www.iplocation.net/>). Indique o provedor de acesso (ISP). 

6. Repita os passos de 2 a 5 em casa em dois horÃÂ¡rios diferentes. Olhe nos [grÃÂ¡ficos de trÃÂ¡fego da Internet brasileira](https://ix.br/agregado/) os dias e horÃÂ¡rios em que o trÃÂ¡fego da Internet ÃÂ© baixo e ÃÂ© alto e faÃÂ§a os experimentos prÃÂ³ximos destes. 

7. Descrevas as diferenÃÂ§as de rotas e atrasos entre os dois experimentos e o experimento feito em sala de aula.



- descrever mudanÃÂ§as na rota e diferenÃÂ§as dos atrasos.
- 

README.md
Lab1.1.txt
Lab1.1-comandos.txt




--> 

<h1>Recursos</h1>

<ul>
<li><p>Ferramentas</p>

<ul>
<li><code>ping</code>: ferramenta que testa a disponibilidade de uma estaÃÂ§ÃÂ£o na rede com o uso de ICMP</li>
<li><code>traceroute</code>: ferramenta que explora o uso de ICMP e TTL do IP para traÃÂ§ar o caminho aproximadado percorrido por pacotes entre duas estaÃÂ§ÃÂµes. DisponÃÂ­vel no Windows com o nome de <code>tracert</code>. <code>paris-traceroute</code> ÃÂ© uma ferramenta com o mesmo propÃÂ³sito, mas que utiliza estratÃÂ©gias diferentes e por isso ÃÂ© capaz de determinar rotas alternativas entre dois destinos.</li>
<li><code>mtr</code>: versÃÂ£o mais amigÃÂ¡vel do <code>traceroute</code>. </li>
</ul></li>
<li><p><a href="../slides/01-Revisao-RedesComputadores.pdf">Slides utilizados no laboratÃÂ³rio</a> - a partir do slide <strong>46</strong>.</p></li>
</ul>

<!--
+ MÃÂ¡quina Virtual utilizada nos experimentos, inclui o sistema `mininet` (ver em [mininet.org](https://github.com/mininet/mininet/wiki/Mininet-VM-Images)).
   + Ubuntu 14.04 - 64 bit (com Mininet 2.2.1)
   + Ubuntu 14.04 - 32 bit (com Mininet 2.2.1)
-->

<h1>ReferÃÂªncias</h1>

<ul>
<li><code>traceroute</code> (no Windows <code>tracert</code>): o capÃÂ­tulo 1 do livro do Kurose oferece uma explicaÃÂ§ÃÂ£o sobre a ferramenta.
<ul>
<li>OpÃÂ§ÃÂµes usualmente ÃÂºteis no <code>traceroute</code>:
<ul>
<li><code>-n</code>: nÃÂ£o tenta realizar o DNS reverso do IP das estaÃÂ§ÃÂµes para obter o seu nome fazendo que a resposta da ferramenta seja mais rÃÂ¡pida.</li>
<li><code>-I</code>:  usa mensagens ICMP para realizar o teste, garantindo uma resposta provÃÂ¡vel das estaÃÂ§ÃÂµes na rota. Esta opÃÂ§ÃÂ£o, entretanto, <strong>exige executar a ferramenta com direitos de administrador</strong>, o que ÃÂ© inviÃÂ¡vel no laboratÃÂ³rio.</li>
</ul></li>
</ul></li>
<li><code>mtr</code>: ferramenta equivalente ao <code>traceroute</code>, mas que mantÃÂ©m estatÃÂ­sticas mais detalhadas e mediÃÂ§ÃÂµes constantes sobre o atraso para envio de pacotes para a estaÃÂ§ÃÂ£o. A ferramenta ÃÂ© particularmente ruim para detectar mudanÃÂ§as de rotas, pois ela naturalmente <em>apaga</em> rotas anteriores. Para evitar esse efeito e ter controle total sobre a saÃÂ­da da ferramenta, sugiro utilizar as opÃÂ§ÃÂµes:
<ul>
<li><code>-r</code>: modo de relatÃÂ³rio, que evita que a ferramenta fique constantemente fazendo medidas, e faz apenas um nÃÂºmero fixo de mediÃÂ§ÃÂµes (default 10), quando entÃÂ£o gera o resultado. Pode-se ajustar o nÃÂºmero de mediÃÂ§ÃÂµes com a opÃÂ§ÃÂ£o <code>-c</code>, indicando o nÃÂºmero de mediÃÂ§ÃÂµes desejadas (exemplo: <code>-c 5</code>)</li>
<li><code>-l</code>: gerando os dados mais <em>crus</em> para posterior anÃÂ¡lise, sendo mais interessante para inclusÃÂ£o no relatÃÂ³rio.</li>
</ul></li>
<li><code>iperf</code>
<ul>
<li><a href="http://iperf.sourceforge.net/">http://iperf.sourceforge.net/</a></li>
<li><a href="http://pt.wikipedia.org/wiki/Iperf">http://pt.wikipedia.org/wiki/Iperf</a></li>
<li><a href="http://labcisco.blogspot.com.br/2013/04/iperf-no-monitoramento-de-desempenho-em.html">http://labcisco.blogspot.com.br/2013/04/iperf-no-monitoramento-de-desempenho-em.html</a></li>
</ul></li>
<li><code>httperf</code>
<ul>
<li>Mosberger, David, and Tai Jin. <a href="http://www.hpl.hp.com/research/linux/httperf/wisp98/httperf.pdf">"httperf - a tool for measuring web server performance."</a> ACM SIGMETRICS Performance Evaluation Review 26.3 (1998): 31-37.</li>
<li><a href="http://www.comlore.com/httperf.html">http://www.comlore.com/httperf.html</a></li>
<li><a href="http://mervine.net/performance-testing-with-httperf">http://mervine.net/performance-testing-with-httperf</a></li>
</ul></li>
<li>DiscussÃÂ£o geral de ferramentas de teste de desempenho
<ul>
<li><a href="http://kb.pert.geant.net/twiki/bin/view/PERTKB/IperfTool">http://kb.pert.geant.net/twiki/bin/view/PERTKB/IperfTool</a></li>
</ul></li>
</ul>

<p></xmp></p>

<script src="https://strapdownjs.com/v/0.2/strapdown.js"></script>

<p></html></p>
