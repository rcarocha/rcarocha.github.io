<p><!DOCTYPE html>
<html>
<title>Redes de Computadores 2 - Prof. Ricardo da Rocha</title></p>

<p><xmp theme="simplex" style="display:none;"></p>

<h1>LaboratÃ³rio: Rotas e Desempenho da ComunicaÃ§Ã£o na Internet</h1>

<h1>Objetivos</h1>

<ul>
<li>Compreender as caracterÃ­sticas das rotas seguidas pelos pacotes/mensagens na Internet</li>
<li>Experimentas os atrasos na comunicaÃ§Ã£o via Internet</li>
</ul>

<h1>PrÃ©-requisitos</h1>

<ul>
<li><em>Conhecimento:</em> Compreender os aspectos gerais do roteamento na Internet e as componentes de atraso de mensagens.</li>
<li><strong>Atividades prÃ©-lab</strong>
<ul>
<li>Assistir Ã s video-aulas de RC1:
<ul>
<li><a href="https://youtu.be/6sGCQ1_KnqM">Internet como Rede HierÃ¡rquica e HeterogÃªnea</a></li>
<li><a href="https://youtu.be/MSYJm0GWizM">Componentes e Natureza do Atraso de Pacotes</a></li>
</ul></li>
</ul></li>
</ul>

<h1>VisÃ£o Geral</h1>

<p>Nesta tarefa, vocÃª terÃ¡ que realizar experimentos para analisar o comportamento da comunicaÃ§Ã£o na Internet, utilizando as ferramentas de comunicaÃ§Ã£o <strong>traceroute</strong> e <strong>mtr</strong>.</p>

<!-- # Requisitos

Todos os requisitos abaixos devem ser atendidos para que vocÃª obtenha **SUCESSO** como conceito da sua tarefa:

1. A atividade Ã© **individual** e nÃ£o pode haver nenhum tipo de cÃ³pia ou similaridade entre os programas ou resultados.
2. Todos os resultados dos experimentos devem ser entregues atÃ© a data e horÃ¡rios combinados com o professor. 
3. Todos os experimentos sÃ£o obrigatÃ³rios. 
4. O relatÃ³rio deverÃ¡ seguir o formato indicado na seÃ§Ã£o **Formato do RelatÃ³rio**.

-->

<h1>Tarefas</h1>

<ol>
<li><p>Indique o endereÃ§o IP alvo que serÃ¡ utilizado por vocÃª nos experimentos. O endereÃ§o IP que vocÃª deverÃ¡ utilizar estÃ¡ indicado no arquivo <a href="dados/lab1.1-destinos.txt">lab1.1-destinos.txt</a> ao lado do seu nÃºmero de matricula ou nome.</p></li>
<li><p>No laboratÃ³rio (em sala de aula), meÃ§a os atrasos da sua estaÃ§Ã£o atÃ© o destino, utilizando o utilitÃ¡rio <code>ping</code>. FaÃ§a 100 mediÃ§Ãµes (acompanhe no campo <code>icmp_seq</code>). Identifique o menor e o maior valor medido. Reporte o resultado do seu teste - saÃ­da do ping - e os menores e maiores valores obtidos. Anote tambÃ©m o comando que vocÃª executou neste passo (identificado por <code>&lt;2&gt;</code>).</p>

<pre><code>destino:
menor-atraso:
maior-atraso:
saida:
</code></pre></li>
<li><p>Execute o programa <code>traceroute</code> ou <code>mtr</code> para identificar a rota entre a sua estaÃ§Ã£o e o destino no momento do experimento. Utilize inicialmente o comando sem nenhum parÃ¢metro adicional, para perceber o comportamento da rota e depois com os parÃ¢metros abaixo, para solicitar a realizaÃ§Ã£o de 10 testes e reportar todo o resultado de uma vez. O resultado deverÃ¡ ser submetido como um dos resultados do experimento.</p>

<pre><code>mtr --show-ips --report-wide -c 10 8.8.8.8
</code></pre></li>
<li><p>Realize novamente o teste, utilizando o envio de pacotes por TCP na porta <code>80</code>, usando os parÃ¢metros <code>--tcp -P 80</code> para facilitar o roteamento por diferentes caminhos (nÃ£o use o parÃ¢metro <code>--report-wide</code>). Anote o nÃºmero do salto e IP, em cada situaÃ§Ã£o que se encontrou uma rota diferente. A sua resposta deve ter o formato do exemplo abaixo, indicando que no salto <strong>5</strong> a rota passou pelos IPs indicados e no salto <strong>8</strong> pelos dois IPs indicados.</p>

<pre><code>5 3.3.3.3
5 3.3.3.4
5 3.3.3.5
8 7.7.7.7
8 7.7.7.8
</code></pre></li>
<li><p>Calcule o atraso mÃ©dio estimado <strong>entre</strong> cada um dos hops (saltos). Lembre-se que o atraso indicado na saÃ­da do programa Ã© o RTT entre a origem (sua estaÃ§Ã£o) e o respectivo salto. A sua resposta deve seguir o formato do seguinte exemplo (observe o uso de "." e nÃ£o "," e valores em "ms"):</p>

<pre><code>1-2 1 ms
2-3 5.22 ms
3-4 10 ms
4-5 10 ms
</code></pre></li>
<li><p>Para cada estaÃ§Ã£o, identifique a sua localizaÃ§Ã£o, utilizando o endereÃ§o IP e um serviÃ§o de mapeamento entre IP e localizaÃ§Ã£o (sugestÃ£o: <a href="https://iplocation.com/">https://iplocation.com/</a> ou <a href="https://www.iplocation.net/">https://www.iplocation.net/</a>). Indique o provedor de acesso (ISP) responsÃ¡vel pelo IP. A sua resposta deve seguir o formato do seguinte exemplo (a localizaÃ§Ã£o Ã© livre, com nomes separados por vÃ­rgula):</p>

<pre><code>1 219.163.164.114 Japan, Tokyo, Open Kikaku Co. Ltd.
2 163.43.24.70 Japan, Tokyo, Sakura Internet Inc.
</code></pre></li>
<li><p>Repita os passos de <strong>2</strong> a <strong>6</strong> em casa em dois horÃ¡rios diferentes. Olhe nos <a href="https://ix.br/agregado/">grÃ¡ficos de trÃ¡fego da Internet brasileira</a> os dias e horÃ¡rios em que o trÃ¡fego da Internet Ã© baixo e Ã© alto e faÃ§a os experimentos prÃ³ximos destes. </p></li>
<li><p>Descrevas as diferenÃ§as de rotas e atrasos entre os dois experimentos e o experimento feito em sala de aula.</p></li>
</ol>

<p>Todos os comandos usados em cada etapa de <strong>2</strong> a <strong>6</strong> deverÃ£o ser  documentados em arquivo <code>Lab1.1-comandos.txt</code>, usando o seguinte formato:</p>

<pre><code>    2 ls -la
    3 clear
</code></pre>

<p>Para um caso hipotÃ©tico de que foi usado o comando <code>ls -la</code> no passo <strong>2</strong> e <code>clear</code> no passo <strong>3</strong>.</p>

<h1>RelatÃ³rio</h1>

<p>A entrega do relatÃ³rio deve ser pelo github classroom, com o qual vocÃªs terÃ£o uma Ã¡rea indicada a partir de email enviado para vocÃªs. Esse relatÃ³rio deve ser entregue em atÃ© 5 dias.</p>

<p>Todos os arquivos colocados no githuv devem estar codificados em <code>UTF-8</code> e devem ser arquivos de texto, seguindo a seguinte estrutura</p>

<pre><code>    README.md       - deve conter uma linha com o seu nome
    Lab1.1.2.txt    - resposta do item (2), de acordo com o formato indicado
    Lab1.1.3.txt    - resposta do item (3)
    Lab1.1.4.txt
    Lab1.1.5.txt
    Lab1.1.6.txt
    Lab1.1.7.2a.txt - resposta da execuÃ§Ã£o do item (2) para outro horÃ¡rio do dia
    Lab1.1.7.3a.txt 
    Lab1.1.7.4a.txt
    Lab1.1.7.5a.txt
    Lab1.1.7.6a.txt
    Lab1.1.7.2b.txt - resposta da execuÃ§Ã£o do item (2) para outro horÃ¡rio do dia
    Lab1.1.7.3b.txt
    Lab1.1.7.4b.txt
    Lab1.1.7.5b.txt
    Lab1.1.7.6b.txt
    Lab1.1-comandos.txt - comandos usandos nos passos de (2) a (6).
    Lab1.1.8.txt    - resposta em texto livre para o item (8)
</code></pre>

<!--
* LaboratÃ³rio 1.1: Rotas e Desempenho da ComunicaÃ§Ã£o na Internet




   + objetivo:
   + prÃ©-lab: 

     github: usar
     em quais situaÃ§Ãµes nÃ£o hÃ¡ resposta?

     roteamento com datagramas
     traceroute


se vocÃª nÃ£o lembra:
  - modelo de camadas: ver

       funcionamento do traceroute e ping, TTL, ICMP, mtr
       **necessÃ¡rio** 
           1. preparar mÃ¡quinas na rede para experimento. 
           2. preparar questÃµes
           3. video sobre github classroom e github
   + atividades: 
        1. enviar trace para ipinexistente, 2. rotas com *, 3. em casa em horÃ¡rios diferentes
   + relatÃ³rio: resultado do trace route com atrasos. 

mtr -rw 8.8.8.8
-n no dns
-l (raw)
-c para nÃºmero de mediÃ§Ãµes

- atrasos -> usar aplicaÃ§Ãµes usuais
- rotas diferentes -> 
- diferentes atrasos ao longo do dia
- roteamento de datagramas na Internet
- efeito de testar: ICMP, UDP, TCP?


- pegar rotas para japan e russia
google:"ip russia", "ip japan" (mostra proxies)
atrasos em enlaces transoceanicos
- provedores de acesso responsÃ¡veis pelos IPs

https://www.caida.org/tools/taxonomy/perftaxonomy.xml
https://www.linode.com/docs/networking/diagnostics/diagnosing-network-issues-with-mtr/

artigos sobre mediÃ§Ã£o
https://www.rnp.br/destaques/confira-dez-artigos-academicos-entender-monitoramento-redes

atraso de propagaÃ§Ã£o, de transmissÃ£o, processamento, 
baixe um conteÃºdo X de tamanho K 

avaliar as diferenÃ§as dos atrasos em diversas mediÃ§Ãµes

velocidade??
bwping ??

sudo apt install geoip-bin

# tarefas

1. Indique o endereÃ§o IP alvo que serÃ¡ utilizado por vocÃª nos experimentos. O endereÃ§o IP que vocÃª deverÃ¡ utilizar estÃ¡ indicado no arquivo lab1.1-destinos.txt ao lado do seu nÃºmero de matricula.

2. No laboratÃ³rio (em sala de aula), meÃ§a os atrasos da sua estaÃ§Ã£o atÃ© o destino, utilizando o utilitÃ¡rio ping. FaÃ§a 100 mediÃ§Ãµes (acompanhe no campo icmp_seq). Identifique o menor e o maior valor medido. Reporte o resultado do seu teste - saÃ­da do ping - e os menos e maiores valores objetidos.

   saÃ­da programa
   menor
   maior valor

3. Execute o programa traceroute ou mtr para identificar a rota entre a sua estaÃ§Ã£o e o destino no momento do experimento.

mtr --show-ips --report-wide -c 10 8.8.8.8

teste com rotas diferentes. mostre.
usar mtr -n --tcp -P 80 118.151.186.55

4. Calcule o atraso mÃ©dio estimado entre cada um dos hops (saltos). Lembre-se que o atraso indicado Ã© o RTT entre a origem (sua estaÃ§Ã£o) e o respectivo salto.

5. Para cada estaÃ§Ã£o, identifique a sua localizaÃ§Ã£o, utilizando o endereÃ§o IP e um serviÃ§o de mapeamento entre IP e localizaÃ§Ã£o (exemplo: <https://iplocation.com/> ou <https://www.iplocation.net/>). Indique o provedor de acesso (ISP). 

6. Repita os passos de 2 a 5 em casa em dois horÃ¡rios diferentes. Olhe nos [grÃ¡ficos de trÃ¡fego da Internet brasileira](https://ix.br/agregado/) os dias e horÃ¡rios em que o trÃ¡fego da Internet Ã© baixo e Ã© alto e faÃ§a os experimentos prÃ³ximos destes. 

7. Descrevas as diferenÃ§as de rotas e atrasos entre os dois experimentos e o experimento feito em sala de aula.



- descrever mudanÃ§as na rota e diferenÃ§as dos atrasos.
- 

README.md
Lab1.1.txt
Lab1.1-comandos.txt




--> 

<h1>Recursos</h1>

<ul>
<li><p>Ferramentas</p>

<ul>
<li><code>ping</code>: ferramenta que testa a disponibilidade de uma estaÃ§Ã£o na rede com o uso de ICMP</li>
<li><code>traceroute</code>: ferramenta que explora o uso de ICMP e TTL do IP para traÃ§ar o caminho aproximadado percorrido por pacotes entre duas estaÃ§Ãµes. DisponÃ­vel no Windows com o nome de <code>tracert</code>. <code>paris-traceroute</code> Ã© uma ferramenta com o mesmo propÃ³sito, mas que utiliza estratÃ©gias diferentes e por isso Ã© capaz de determinar rotas alternativas entre dois destinos.</li>
<li><code>mtr</code>: versÃ£o mais amigÃ¡vel do <code>traceroute</code>. </li>
</ul></li>
<li><p><a href="../slides/01-Revisao-RedesComputadores.pdf">Slides utilizados no laboratÃ³rio</a> - a partir do slide <strong>46</strong>.</p></li>
</ul>

<!--
+ MÃ¡quina Virtual utilizada nos experimentos, inclui o sistema `mininet` (ver em [mininet.org](https://github.com/mininet/mininet/wiki/Mininet-VM-Images)).
   + Ubuntu 14.04 - 64 bit (com Mininet 2.2.1)
   + Ubuntu 14.04 - 32 bit (com Mininet 2.2.1)
-->

<h1>ReferÃªncias</h1>

<ul>
<li><code>traceroute</code> (no Windows <code>tracert</code>): o capÃ­tulo 1 do livro do Kurose oferece uma explicaÃ§Ã£o sobre a ferramenta.
<ul>
<li>OpÃ§Ãµes usualmente Ãºteis no <code>traceroute</code>:
<ul>
<li><code>-n</code>: nÃ£o tenta realizar o DNS reverso do IP das estaÃ§Ãµes para obter o seu nome fazendo que a resposta da ferramenta seja mais rÃ¡pida.</li>
<li><code>-I</code>:  usa mensagens ICMP para realizar o teste, garantindo uma resposta provÃ¡vel das estaÃ§Ãµes na rota. Esta opÃ§Ã£o, entretanto, <strong>exige executar a ferramenta com direitos de administrador</strong>, o que Ã© inviÃ¡vel no laboratÃ³rio.</li>
</ul></li>
</ul></li>
<li><code>mtr</code>: ferramenta equivalente ao <code>traceroute</code>, mas que mantÃ©m estatÃ­sticas mais detalhadas e mediÃ§Ãµes constantes sobre o atraso para envio de pacotes para a estaÃ§Ã£o. A ferramenta Ã© particularmente ruim para detectar mudanÃ§as de rotas, pois ela naturalmente <em>apaga</em> rotas anteriores. Para evitar esse efeito e ter controle total sobre a saÃ­da da ferramenta, sugiro utilizar as opÃ§Ãµes:
<ul>
<li><code>-r</code>: modo de relatÃ³rio, que evita que a ferramenta fique constantemente fazendo medidas, e faz apenas um nÃºmero fixo de mediÃ§Ãµes (default 10), quando entÃ£o gera o resultado. Pode-se ajustar o nÃºmero de mediÃ§Ãµes com a opÃ§Ã£o <code>-c</code>, indicando o nÃºmero de mediÃ§Ãµes desejadas (exemplo: <code>-c 5</code>)</li>
<li><code>-l</code>: gerando os dados mais <em>crus</em> para posterior anÃ¡lise, sendo mais interessante para inclusÃ£o no relatÃ³rio.</li>
</ul></li>
<li><code>iperf</code>
<ul>
<li><a href="http://iperf.sourceforge.net/">http://iperf.sourceforge.net/</a></li>
<li><a href="http://pt.wikipedia.org/wiki/Iperf">http://pt.wikipedia.org/wiki/Iperf</a></li>
<li><a href="http://labcisco.blogspot.com.br/2013/04/iperf-no-monitoramento-de-desempenho-em.html">http://labcisco.blogspot.com.br/2013/04/iperf-no-monitoramento-de-desempenho-em.html</a></li>
</ul></li>
<li><code>httperf</code>
<ul>
<li>Mosberger, David, and Tai Jin. <a href="http://www.hpl.hp.com/research/linux/httperf/wisp98/httperf.pdf">"httperf - a tool for measuring web server performance."</a> ACM SIGMETRICS Performance Evaluation Review 26.3 (1998): 31-37.</li>
<li><a href="http://www.comlore.com/httperf.html">http://www.comlore.com/httperf.html</a></li>
<li><a href="http://mervine.net/performance-testing-with-httperf">http://mervine.net/performance-testing-with-httperf</a></li>
</ul></li>
<li>DiscussÃ£o geral de ferramentas de teste de desempenho
<ul>
<li><a href="http://kb.pert.geant.net/twiki/bin/view/PERTKB/IperfTool">http://kb.pert.geant.net/twiki/bin/view/PERTKB/IperfTool</a></li>
</ul></li>
</ul>

<p></xmp></p>

<script src="https://strapdownjs.com/v/0.2/strapdown.js"></script>

<p></html></p>
