<p><!DOCTYPE html>
<html>
<title>ProgramaÃ§Ã£o Funcional e LÃ³gica - Prof. Ricardo da Rocha</title></p>

<p><xmp theme="simplex" style="display:none;"></p>

<h1>Tarefa 2 de ProgramaÃ§Ã£o Funcional e LÃ³gica</h1>

<h1>VisÃ£o geral</h1>

<p>Nesta tarefa vocÃª deverÃ¡ implementar funÃ§Ãµes de manipulaÃ§Ã£o de nÃºmero de boleto bancÃ¡rio brasileiro, de maneira a praticar a construÃ§Ã£o de funÃ§Ãµes simples em Haskell.</p>

<h1>AtualizaÃ§Ãµes</h1>

<ul>
<li><strong>11/setembro</strong>: o fator de vencimento na linha digitÃ¡vel essa localizado na posiÃ§Ã£o <code>UUUU</code> e nÃ£o na posiÃ§Ã£o <code>CCCC</code>. Este texto foi corrigido para contemplar essa informaÃ§Ã£o.</li>
</ul>

<h1>DescriÃ§Ã£o</h1>

<p><img src="images/BoletoBancario.png" /></p>

<p>O <a href="https://pt.wikipedia.org/wiki/Boleto_banc%C3%A1rio">boleto bancÃ¡rio brasileiro</a> pode ser identificado por um de dois nÃºmeros:</p>

<ul>
<li>Linha digitÃ¡vel:  Ã© um identificador com 47 nÃºmeros que aparece no topo do boleto bancÃ¡rio que Ã© projetado para facilitar a digitaÃ§Ã£o por humanos.</li>
<li>CÃ³digo de barras: Ã© um identificador com 44 nÃºmeros representado no boleto pelo cÃ³digo de barras bidimensional que Ã© projetado para a leitura automÃ¡tica por dispositivos eletrÃ´nicos.</li>
</ul>

<p>Ambas as identificaÃ§Ãµes traduzem um mesmo boleto bancÃ¡rio e possuem o mesmo conjunto de informaÃ§Ãµes que, entretanto, Ã© traduzida em nÃºmeros de maneiras diferentes. Esta tarefa envolve unicamente a interpretaÃ§Ã£o da <strong>linha digitÃ¡vel</strong> e por isso vocÃª deve ter <strong>cuidado para nÃ£o implementar</strong> a manipulaÃ§Ã£o do cÃ³digo de barras (tenha cuidado ao procurar informaÃ§Ãµes de outras fontes alÃ©m desta descriÃ§Ã£o).</p>

<p>Por exemplo, as seguintes "linha digitÃ¡vel" e "cÃ³digo de barras" representam o mesmo boleto:</p>

<pre><code>    00190.50095 40144.816069 06809.350314 3 37370000000100 - linha digitÃ¡vel
    00193373700000001000500940144816060680935031 - cÃ³digo de barras
</code></pre>

<h2>Estrutura da Linha DigitÃ¡vel</h2>

<p>Considere a seguinte estrutura dos 47 nÃºmero da "linha digitÃ¡vel":</p>

<pre><code>    +-------------+--------------+--------------+---------+----------------+
    |   Campo 1   |   Campo 2    |   Campo 3    | Campo 4 |    Campo 5     |
    +-------------+--------------+--------------+---------+----------------+
    | AAABC.CCCCX | DDDDD.DDDDDY | EEEEE.EEEEEZ | K       | UUUUVVVVVVVVVV |
    +-------------+--------------+--------------+---------+----------------+
</code></pre>

<p>Os nÃºmeros devem ser interpretados da seguinte maneira:</p>

<ul>
<li><code>AAA</code>: posiÃ§Ãµes 1 a 3 identificam o banco de acordo com um identificador Ãºnico atribuÃ­do a cada banco. Por exemplo, "001" Ã© Banco do Brasil e "237" Ã© Bradesco (vocÃª encontra os cÃ³digos de todos os banco <a href="https://www.febraban.org.br/associados/utilitarios/bancos.asp">aqui</a>).</li>
<li><code>B</code>: posiÃ§Ã£o 4 identifica a moeda aplicada ao boleto, que Ã© usualmente "9", cÃ³digo do real.</li>
<li><code>X</code>: posiÃ§Ã£o 10 Ã© o dÃ­gito verificador das informaÃ§Ãµes do "Campo 1".</li>
<li><code>Y</code>: posiÃ§Ã£o 21 Ã© o dÃ­gito verificador das informaÃ§Ãµes do "Campo 2".</li>
<li><code>Z</code>: posiÃ§Ã£o 31 Ã© o dÃ­gito verificador das informaÃ§Ãµes do "Campo 3".
<!-- * <code>DDDDD.DDDDD</code>: posiÃ§Ãµes 11 a 20 identificam o valor do boleto, multiplicado por 100. EntÃ£o se os nÃºmero sÃ£o <code>00009.13499</code> entÃ£o o valor do boleto Ã© R$ 9.134,99 (considerando que moeda Ã© real). --></li>
<li><code>UUUU</code>: posiÃ§Ãµes 34 a 37 Ã© o fator de vencimento, que indica a data de vencimento do boleto na forma de nÃºmero de dias apÃ³s 7/10/1997. </li>
<li><code>VVVVVVVVVV</code>: posiÃ§Ãµes 38 a 47 identificam o valor do boleto, multiplicado por 100. EntÃ£o se os nÃºmero sÃ£o <code>0000913499</code> entÃ£o o valor do boleto Ã© R$ 9.134,99 (considerando que moeda Ã© real).</li>
<li><code>DDDDD.DDDDD</code>, <code>K</code> e <code>CCCCC</code>: a interpretaÃ§Ã£o dessas posiÃ§Ãµes Ã© definida pelo banco ou Ã© uma porÃ§Ã£o do cÃ³digo de barras e por este motivo nÃ£o serÃ£o consideradas nesta tarefa. VocÃª deve apenas considerar que eles serÃ£o fornecidos para vocÃª.</li>
</ul>

<h2>Tarefas de ImplementaÃ§Ã£o</h2>

<p>Dado um cÃ³digo de boleto bancÃ¡rio na representaÃ§Ã£o de linha digitÃ¡vel (nÃºmeros que aparecem no boleto), vocÃª deverÃ¡ implementar funÃ§Ãµes que retornem:</p>

<ul>
<li>Se o boleto Ã© vÃ¡lido, ou seja, se os dÃ­gitos verificadores dos trÃªs campos (<code>X</code>, <code>Y</code> e <code>Z</code>) estÃ£o corretos.</li>
<li>Data de vencimento de um boleto</li>
<li>Valor de um boleto</li>
<li>Banco associado ao boleto</li>
</ul>

<h3>CÃ¡lculo do fator de vencimento</h3>

<p>O fator de vencimento indica a data de vencimento do boleto a forma de nÃºmero de dias apÃ³s 7 de outubro de 1997. Se o fator de vencimento Ã© <code>0001</code> entÃ£o a data de vencimento Ã© 8 de outubro de 1997 e assim por diante, como no exemplo mostrado na tabela.</p>

<!--
Fator   Data de Vencimento
1000    03/07/2000
1001    04/07/2000
1002    05/07/2000
9999    21/02/2025
-->

<table><tbody><tr><th>Fator</th><th>Data de Vencimento</th></tr><tr><td>1000</td><td>03/07/2000</td></tr><tr><td>1001</td><td>04/07/2000</td></tr><tr><td>1002</td><td>05/07/2000</td></tr><tr><td>9999</td><td>21/02/2025</td></tr></tbody></table>

<p>HÃ¡ algumas regras adicionais para avaliar o fator de vencimento a partir de 21/02/2025, mas elas nÃ£o serÃ£o consideradas nesta tarefa.</p>

<h3>CÃ¡lculo dos DÃ­gitos Verificadores</h3>

<p>Para o cÃ¡lculo dos digitos verificadores de cada campo, cada nÃºmero deve ser multiplicado por um "multiplicador" (1 ou 2), resumido em um nÃºmero de um dÃ­gito (ver <code>resumeDigito</code>) e somados entre si. Do valor total, Ã© extraÃ­do o resultado da divisÃ£o inteira e o resto (<code>R</code>). O valor do dÃ­gito Ã© <code>(10-R) mod 10</code>. </p>

<p>A funÃ§Ã£o <code>resumeDigito</code>, que transforma um nÃºmero de dois dÃ­gito em um dÃ­gito, soma o valor da dezena com a unidade, atÃ© que o resultado seja um nÃºmero de um dÃ­gito.</p>

<p>O multiplicador Ã© uma sequÃªncia de alternada de "2" e "1", iniciando por "2", a associada Ã s respectivas posiÃ§Ãµes dos nÃºmeros do cÃ³digo, <strong>excluindo</strong> as posiÃ§Ãµes dos dÃ­gitos verificadores. </p>

<pre><code>    00190.50095 40144.816069 06809.350314 3 37370000000100
    Campo 1     Campo 2      Campo 3
    00190.50095 40144.816069 06809.350314
    21212 1212  12121 21212  12121 21212     &lt;--- multiplicador
</code></pre>

<p>Para o "campo 2":</p>

<ol>
<li><p>AplicaÃ§Ã£o do multiplicador: </p>

<pre><code>4x1 + 0x2 + 1x1 + 4x2 + 4x1 + 8x2 + 1x1 + 6x2 + 0x1 + 6x2
4   + 0   + 1   + 8   + 4   + 16  + 1   + 12  + 0   + 12
</code></pre></li>
<li><p>AplicaÃ§Ã£o do <code>resumeDigito</code>, totalizando 31.</p>

<pre><code>4 + 0 + 1 + 8 + 4 + 16    + 1 + 12    + 0 + 12
4 + 0 + 1 + 8 + 4 + (1+6) + 1 + (1+2) + 0 + (1+2) = 31
</code></pre></li>
<li><p>ObtenÃ§Ã£o do resto</p>

<pre><code>31 mod 10 = 1
</code></pre></li>
<li><p>CÃ¡culo do valor do dÃ­gito (que deve gerar o mesmo nÃºmero na posiÃ§Ã£o 21 da linha digitÃ¡vel)</p>

<pre><code>(10 - 1) mod 10 = 9
</code></pre></li>
</ol>

<p>VocÃª encontra uma demonstraÃ§Ã£o completos para o cÃ¡lculo dos campos 1, 2 e 3 para essa linha digitÃ¡vel no extrado da <a href="boleto/especificacao.boleto.banco.brasil-anexoIV.pdf">especificaÃ§Ã£o do boleto do banco do Brasil (Anexo IV)</a>. Observe que o cÃ¡lculo (3) e (4) indicados no documento sÃ£o ligeiramente diferentes dos indicados anteriormente, mas - salvo engano - produzem o mesmo resultado final.</p>

<h2>Requisitos Funcionais de ImplementaÃ§Ã£o</h2>

<p>O nÃºmero do boleto serÃ¡ apresentado na forma de uma String, podendo ou nÃ£o conter espaÃ§os ou pontos. Para efeito de avaliaÃ§Ã£o, espaÃ§os e pontos serÃ£o ignorados e os seguintes boletos deverÃ£o ser considerados iguais</p>

<pre><code>    "23791.11103 60000.000103 01000.222206 1 48622000000000"
    "23791111036000000010301000222206148622000000000"
</code></pre>

<ol>
<li><p>FunÃ§Ã£o <code>boletoNum</code> que recebe um boleto e retorna uma lista de inteiros (<code>Int</code>) com o valor referente a cada posiÃ§Ã£o do boleto.</p>

<pre><code>boletoNum "23791.11103 60000.000103 01000.222206 1 48622000000000" =&gt; [2,3,7,9,1,1,1,1,0,3,6,0,0,0,0,0,0,0,1,0,3,0,1,0,0,0,2,2,2,2,0,6,1,4,8,6,2,2,0,0,0,0,0,0,0,0,0]
</code></pre></li>
<li><p>FunÃ§ao <code>bancoBoleto</code> que recebe a lista de inteiros de um boleto e retorna o cÃ³digo do banco</p>

<pre><code>bancoBoleto [2,3,7,9,1,1,1,1,0,3,6,0,0,0,0,0,0,0,1,0,3,0,1,0,0,0,2,2,2,2,0,6,1,4,8,6,2,2,0,0,0,0,0,0,0,0,0] =&gt; 237
</code></pre></li>
<li><p>FunÃ§Ã£o <code>valorBoleto</code> que recebe a lista de inteiros de um boleto e retorna o valor do boleto (como <code>Double</code>)</p>

<pre><code>valorBoleto [2,3,7,9,1,1,1,1,0,3,6,0,0,0,0,0,0,0,1,0,3,0,1,0,0,0,2,2,2,2,0,6,1,4,8,6,2,2,0,0,0,0,0,0,0,0,0] =&gt; 20000000,00
</code></pre></li>
<li><p>FunÃ§Ã£o <code>vencimentoBoleto</code> que recebe a lista de inteiros de um boleto e retorna a sua data de vencimento na forma de uma tupla com os valores numÃ©ricos de dia, mÃªs e ano, respectivamente. Por exemplo, a data 13 de agosto de 2019 deverÃ¡ ser representada como a tupla <code>(13,8,2019)</code>. Na linha digitÃ¡vel do exemplo, o valor do fato de vencimento Ã© <code>4862</code>, ou seja, 4.862 dias apÃ³s 7 de outubro de 1997 que Ã© o dia 29 de janeiro de 2011.</p>

<pre><code>vencimentoBoleto [2,3,7,9,1,1,1,1,0,3,6,0,0,0,0,0,0,0,1,0,3,0,1,0,0,0,2,2,2,2,0,6,1,4,8,6,2,2,0,0,0,0,0,0,0,0,0] =&gt; (29,1,2011)
</code></pre>

<p>Como parte da implementaÃ§Ã£o desta funÃ§Ã£o, vocÃª necessariamente deverÃ¡ implementar as seguintes funÃ§Ãµes de (1) a (3):</p>

<ol>
<li><p>FunÃ§Ã£o <code>bissexto</code> que recebe um ano e retorna verdadeiro se ele Ã© bissexto. Um ano Ã© bissexto se <em>"(ano Ã© divisÃ­vel por 400)"</em> OU <em>"(ano Ã© divisÃ­vel por 4 E nÃ£o Ã© divisÃ­vel por 100)"</em>.</p>

<pre><code>bissexto 2016 =&gt; True
bissexto 2017 =&gt; False
bissexto 2020 =&gt; True
</code></pre></li>
<li><p>FunÃ§Ã£o <code>dataSomaDias</code> que recebe uma tupla <code>D1</code> com dia, mÃªs e ano, respectivamente, um inteiro com nÃºmero de dias <code>d</code> e retorna outra tupla <code>D2</code> representando a data referente ao dia <code>D1</code> acrescido dos dias <code>d</code>. </p>

<pre><code>dataSomaDias (7,10,1997) 1000 =&gt; (3,7,2000)
dataSomaDias (7,10,1997) 1001 =&gt; (4,7,2000)
dataSomaDias (7,10,1997) 1002 =&gt; (5,7,2000)
dataSomaDias (7,10,1997) 9999 =&gt; (21,2,2025)
</code></pre></li>
<li><p>FunÃ§Ã£o <code>diasMesAno</code> que dado um mÃªs, representado como numeral (janeiro = 1, fevereiro = 2) e um ano, retorna o nÃºmero de dias daquele mÃªs.</p>

<pre><code>diasMesAno 1 2016 =&gt; 31
diasMesAno 2 2016 =&gt; 29
diasMesAno 2 2017 =&gt; 28
diasMesAno 4 2017 =&gt; 30
</code></pre></li>
</ol></li>
<li><p>FunÃ§Ã£o <code>boletoValido</code> que retorna <code>True</code> caso os dÃ­gitos verificadores do boleto estejam corretos.</p>

<pre><code>boletoValido [2,3,7,9,1,1,1,1,0,3,6,0,0,0,0,0,0,0,1,0,3,0,1,0,0,0,2,2,2,2,0,6,1,4,8,6,2,2,0,0,0,0,0,0,0,0,0] =&gt; True
boletoValido [2,3,7,9,1,1,0,1,0,3,6,0,0,0,0,0,0,0,1,0,3,0,1,0,0,0,2,2,2,2,0,6,1,4,8,6,2,2,0,0,0,0,0,0,0,0,0] =&gt; False
</code></pre></li>
</ol>

<h1>Recursos Ãºteis</h1>

<ul>
<li>PÃ¡gina Ãºtil para testes com <a href="https://boletobancario-codigodebarras.blogspot.com/">cÃ¡lculo online de boleto bancÃ¡rio</a></li>
<li><a href="boleto/especificacao.boleto.banco.brasil.pdf">EspecificaÃ§Ã£o completa</a> do formato do boleto do Banco do Brasil</li>
</ul>

<h1>Requisitos</h1>

<p>Reveja o <a href="http://inf.ufg.br/~ricardo/pfl/plano/plano-PFL-2019.2.pdf">plano da disciplina</a> na seÃ§Ã£o "PROCESSOS E CRITÃRIOS DE AVALIAÃÃO", caso seja necessÃ¡rio relembrar como as tarefas serÃ£o avaliadas.</p>

<p>Os seguintes requisitos devem ser satisfeitos para o seu cÃ³digo ter o conceito <strong>FINALIZADO</strong>.</p>

<ol>
<li>Todas as funÃ§Ãµes indicadas devem ser implementadas.</li>
<li>Todas as funÃ§Ãµes implementadas devem incluir cÃ³digo de teste, para alÃ©m das funÃ§Ãµes indicadas acima.</li>
<li>O seu cÃ³digo deverÃ¡ ser submetido pelo <a href="https://classroom.github.com/">GitHub Classroom</a>, no local indicado pelo email com o assunto: <strong><code>[PFL] submissÃ£o da tarefa 02 - processamento de boleto bancÃ¡rio</code></strong>. </li>
<li>As tarefas sÃ£o individuais e nenhum tipo de cÃ³pia ou similaridade com cÃ³digo, seja de outro aluno, seja da Internet ou livros, serÃ¡ aceita.</li>
</ol>

<h1>Prazo</h1>

<p>O prazo para entrega da atividade Ã© o dia <strong>21 de setembro</strong> (sÃ¡bado). Depois desse prazo, vocÃª poderÃ¡ efetuar correÃ§Ãµes na sua implementaÃ§Ã£o - quando solicitadas pelo professor - em atÃ© 7 dias adicionais.</p>

<p></xmp></p>

<script src="https://strapdownjs.com/v/0.2/strapdown.js"></script>

<p></html></p>
